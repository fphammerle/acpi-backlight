#!/usr/bin/env python3

# pylint: disable=missing-docstring,invalid-name

import acpi_backlight
import acpi_backlight.evaluate


def acpi_backlight_eval(expr_str):
    backlight = acpi_backlight.Backlight()
    backlight.brightness_relative = acpi_backlight.evaluate.evaluate_expression(
        expr_str=expr_str,
        names={'b': backlight.brightness_relative},
    )
    print(backlight.brightness_relative)


def _init_argparser():
    import argparse
    argparser = argparse.ArgumentParser()
    argparser.add_argument('expr_str')
    return argparser


def main(argv):
    argparser = _init_argparser()
    args = argparser.parse_args(argv[1:])
    acpi_backlight_eval(**vars(args))
    return 0

if __name__ == "__main__":
    import sys
    sys.exit(main(sys.argv))
